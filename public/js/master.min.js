!function(){var r=function(){for(var r,n=10001,i=1e4,a=20,e=2,t=-8,o=1e6,f=5,u=[],c=0;8>c;c++)u[c]=[0,0,0,0,0,0,0,0];for(var v,l,s=[-1,0,1,-1,1,-1,0,1],d=[-1,-1,-1,0,0,1,1,1],m=2,k=1,w=1,h=0,b=[w,h],p=[],c=0;65*e>c;c++)p[c]=0;var g,z,n,C=[0,0],T=0,D=function(n){r=n;for(var i=0,a=0;8>a;a++){var e=$('<div class="row" id="row'+a+'"></div>');$("#row"+a).remove();for(var t=0;8>t;t++){var o=$("<div data-row="+a+" data-column="+t+' class="cell" id="cell'+i+'"><div class="piece"></div></div>');i++,e.append(o)}$("#gameboard").append(e)}$(".cell").off(),$(".cell").on("click",function(){Q($(this).data("row"),$(this).data("column"),0)}),M()},M=function(){for(var r=0;8>r;r++)for(var n=0;8>n;n++)u[r][n]=0;u[3][3]=1,u[3][4]=2,u[4][3]=2,u[4][4]=1,k=1,l=0,g=1e3,C=[0,0],y(2)},y=function(r){m=r,N(),O(),B()},B=function(){v=0;for(var r=0;8>r;++r)for(var n=0;8>n;++n)(0==u[r][n]||3==u[r][n])&&v++},S=function(){for(var r=0,n=0,i="This was a great game!",a=0;8>a;++a)for(var e=0;8>e;++e)1==u[a][e]?++r:2==u[a][e]&&++n;n>r?i="Black won: "+n+" : "+r+" - You are the Champion!":r>n?i="White won: "+r+" : "+n+" - This game takes a minute to learn and a life time to master. Stay tuned!":r==n&&(i="Drawn: "+r+" : "+n),alert(i)},W=function(r,n){for(var i=0,a=0,e=0;8>e;++e)for(var t=0;8>t;++t)r[e][t]==n?++i:r[e][t]==Y(n)&&++a;return i-a},Y=function(r){return 1==r?++r:--r,r},j=function(){m=Y(m)},q=function(r,n,i,a,e,t,o){return 0==r[n][i]||3==r[n][i]?0:r[n][i]==t?r[a][e]==t?0:-o:r[a][e]==Y(t)?0:o},x=function(r,i,a){for(var t=0,o=0;i[o]!=n;)++t,o+=e;for(o=0,K(r,Y(a),i);i[o]!=n;)--t,o+=e;return t},A=function(r,n){for(var i=0,a=Y(n),e=2;6>e;++e)r[0][e]==n?++i:r[0][e]==a&&--i,r[7][e]==n?++i:r[7][e]==a&&--i,r[e][0]==n?++i:r[e][0]==a&&--i,r[e][7]==n?++i:r[e][7]==a&&--i;return i},E=function(i,e,t,o){var f=0;if(0>=o)return n*W(i,e);if((2==r||r>=4)&&(f+=q(i,1,1,0,0,e,50),f+=q(i,6,1,7,0,e,50),f+=q(i,1,6,0,7,e,50),f+=q(i,6,6,7,7,e,50),f+=q(i,0,1,0,0,e,10),f+=q(i,1,0,0,0,e,10),f+=q(i,0,6,0,7,e,10),f+=q(i,7,1,7,0,e,10),f+=q(i,6,0,7,0,e,10),f+=q(i,1,7,0,7,e,10),f+=q(i,7,6,7,7,e,10),f+=q(i,6,7,7,7,e,10)),r>=3&&(f+=x(i,t,e)),r>=4&&(f+=A(i,e)),r>=5)for(var u=100,c=[0,0,0],v=0;8>v;v+=7)for(var l=0;8>l;l+=7)0==i[v][l]?1==H(i,v,l,Y(e),a,c,0)&&(f-=u):i[v][l]==e?f+=u:3==i[v][l]?1==H(i,v,l,Y(e),a,c,0)?f-=u:f+=u:f-=u;return f},F=function(r,t,o,f,u,c,v){var l,s=[],d=[];if(++T,T>2e3&&(T=0,(new Date).getTime()-z>g))return i;if(0==t)return E(r,c,u,v);if(u[0]==n)return K(r,Y(c),s),s[0]==n?n*W(r,c):(l=-F(r,t,-f,-o,s,Y(c),v),o=l>o?l:o);for(var m=0;u[m]!=n;){for(var k=0;8>k;++k){d[k]=[];for(var w=0;8>w;++w)d[k][w]=r[k][w]}if(d[u[m]][u[m+1]]=c,I(d,u[m],u[m+1],c,a),K(d,Y(c),s),l=-F(d,t-1,-f,-o,s,Y(c),v-1),Math.abs(l)==i)return i;if(o=l>o?l:o,o>=f)break;m+=e}return o},G=function(r){if(r)return void Q(8,8);var t,f,c=0,l=0,s=0,d=[],k=[],w=2,h=0,b=v;if(z=(new Date).getTime(),p[e]!=n)for(h=0;b>h;++h){for(t=0,f=-o;p[t]!=n;){for(var $=0;8>$;++$){d[$]=[];for(var C=0;8>C;++C)d[$][C]=u[$][C]}if(d[p[t]][p[t+1]]=m,I(d,p[t],p[t+1],m,a),K(d,Y(m),k),s=-F(d,h,-o,o,k,Y(m),v-1),Math.abs(s)==i){l=-1;break}s>f?(f=s,l=t,w=2):s==f&&(100*Math.random()<99/w&&(f=s,l=t),++w),t+=e}if(l>=0&&(c=l),(new Date).getTime()-z>g)break}Q(p[c],p[c+1])},H=function(r,i,e,o,f,u,c){var v,l;switch(f){case a:for(var m=0;8>m;++m)if(v=i+d[m],l=e+s[m],!(v&t||l&t)&&0!=r[v][l]&&3!=r[v][l])if(r[v][l]==o);else if(1==H(r,v,l,o,m,u,c))return u[c++]=i,u[c++]=e,u[c]=n,1;break;default:if(v=i+d[f],l=e+s[f],v&t||l&t)return 0;if(r[v][l]==o)return 1;if(0==r[v][l]||3==r[v][l])return 0;if(r[v][l]!=o)return H(r,v,l,o,f,u,c)}return r[i][e]=0,0},I=function(r,n,i,e,o){var f,u;switch(o){case a:for(var c=0;8>c;++c)f=n+d[c],u=i+s[c],f&t||u&t||0!=r[f][u]&&3!=r[f][u]&&r[f][u]!=e&&I(r,f,u,e,c);break;default:if(f=n+d[o],u=i+s[o],f&t||u&t)return 0;if(r[f][u]==e)return r[n][i]=e,1;if(0==r[f][u]||3==r[f][u])return 0;if(r[f][u]!=e&&1==I(r,f,u,e,o))return r[n][i]=e,1}return 0},J=function(r){for(var n=0;8>n;++n)for(var i=0;8>i;++i)3==r[n][i]&&(r[n][i]=0)},K=function(r,i,t){J(r),t[0]=n;for(var o=0,f=0;8>f;++f)for(var u=0;8>u;++u)0==r[f][u]&&1==H(r,f,u,i,a,t,o)&&(r[f][u]=3,o+=e);return t[0]},L=function(){for(var r=0,n=0;8>n;n++)for(var i=0;8>i;i++){var a=$("#cell"+r);switch(a.removeClass("white black open-move-black last-move"),u[n][i]){case 1+f:a.addClass("last-move");case 1:a.addClass("white");break;case 2+f:a.addClass("last-move");case 2:a.addClass("black");break;case 3:2==m&&a.addClass("open-move-black")}r++}},N=function(){return K(u,m,p)==n?1==l?(u[C[0]][C[1]]+=f,L(u),u[C[0]][C[1]]-=f,2):(u[C[0]][C[1]]+=f,L(u),u[C[0]][C[1]]-=f,l=1,1):(l=0,0)},O=function(){u[C[0]][C[1]]+=f,L(u),u[C[0]][C[1]]-=f},P=function(r,n){if(r+n>=0){if(r&t||n&t)return N();if(!b[m-1]&&3!=u[r][n])return 3;u[r][n]=m,C[0]=r,C[1]=n,v--,I(u,r,n,m,a),j(),k++}return N()},Q=function(r,n){var i=0;if(!(v>0))return void S();var a=P(r,n);if(O(),3!=a){if(0>=v)return void S();if(2==a)return void S();1==a&&(j(),i=N(),O()),b[m-1]&&setTimeout(function(){G(i)},100)}};return{initialize:D}}();r.initialize(1),$("#amateur").on("click",function(){r.initialize(1)}),$("#student").on("click",function(){r.initialize(2)}),$("#specialist").on("click",function(){r.initialize(3)}),$("#professor").on("click",function(){r.initialize(4)}),$("#champion").on("click",function(){r.initialize(5)})}();